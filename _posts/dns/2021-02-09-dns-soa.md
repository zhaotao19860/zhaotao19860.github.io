---
title: soa
date: 2021-02-09 11:03:00 +0800
category: DNS
---

**Start Of Authortive Record**(缩写soa)属于DNS的一种记录类型，包含本zone的控制及管理信息，
主要用于主授权与辅授权之间的zone同步，soa记录格式说明参见 [RFC 1035](https://www.ietf.org/rfc/rfc1035.txt)。

#### 格式

```
                                 1  1  1  1  1  1 
      0  1  2  3  4  5  6  7  8  9  0  1  2  3  4  5 
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ ++++++++++++++++++++++++++++++++++++
    |                                               | RDATA-HEADER
    /                                               / 
    /                      NAME                     / 域名：变长,zone名称
    |                                               | 
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ 
    |                      TYPE                     | 请求类型：2字节,soa
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ 
    |                     CLASS                     | 网络类型：2字节,IN(for internet)
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ 
    |                      TTL                      | 缓存时长：4字节,3600
    |                                               | 0表示不缓存
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ ++++++++++++++++++++++++++++++++++++
    |                                               | RDATA
    |                   RDLENGTH                    | 长度：2字节,rdata部分长度
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ 
    /                     MNAME                     / 域名：变长,主授权名称
    /                                               / update请求的目的域名/notify请求的源域名
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ 
    /                     RNAME                     / 域名：变长,所有者邮箱，域名的第一个点转为@即为邮箱地址
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ 
    |                    SERIAL                     | 系列号：4字节,最新版本
    |                                               | 辅授权版本小于此版本时，开始同步，需注意值溢出问题(rfc1982)
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ 
    |                    REFRESH                    | 刷新间隔：4字节,主辅同步间隔
    |                                               | 
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ 
    |                     RETRY                     | 重试间隔：4字节,主辅同步失败重试时间
    |                                               | 取值需要小于refresh
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ 
    |                    EXPIRE                     | 超时时间：4字节,主辅同步失败超时时间
    |                                               | 取值需要大于refresh+retry
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ 
    |                    MINIMUM                    | 缓存时间：4字节,Negative response缓存时间
    |                                               | 
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+  +++++++++++++++++++++++++++++++++++++
```

#### 例子

```
$TTL 86400
@   IN  SOA     ns.icann.org. noc.dns.icann.org. (
        2020080302  ;Serial  //当前版本为2020年8月3号2点生成的；
        7200        ;Refresh //主辅同步时间为2小时；
        3600        ;Retry   //主辅同步失败重试间隔为1小时；
        1209600     ;Expire  //主辅同步失败后14天，辅服务器将不提供服务，因为数据可能已更新；
        3600        ;Negative response caching TTL //否定回答的缓存时间，如nxdomain;
)
```

